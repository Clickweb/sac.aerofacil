<?xml version="1.0" encoding="UTF-8"?>
<rules xmlns="http://namespaces.plone.org/diazo"
       xmlns:css="http://namespaces.plone.org/diazo/css"
       xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <theme href="theme.html" css:if-content="#visual-portal-wrapper" />
  <xsl:output method="html" />

  <!-- Head -->
  <copy attributes="lang dir" css:content="html" css:theme="html" />
  <!-- TODO: Descartar linhas comentadas quando resolver bug do registro dos resources: http://stackoverflow.com/questions/18877354/how-can-i-make-plone-portal-registries-find-and-cook-new-style-static-resources -->
  <!--before css:content="head base, head meta, head link, head style, head script" css:theme-children="head" /-->
  <!--replace css:content="head title" css:theme="head title" /-->
  <replace css:content-children="head" css:theme-children="head" />

  <!-- Top -->
  <copy attributes="*" css:content="body" css:theme="body" />
  <before css:content="#portal-header > p.hiddenStructure:first-child" css:theme-children="body" />
  <after css:content="#portal-personaltools-wrapper" css:theme=".barra-topo .centraliza" css:if-content="#user-name" />
  <copy attributes="href title" css:content="#portal-logo" css:theme=".topo h1 a" />
  <replace css:content=".menu" css:theme=".menu" />

  <!-- Column Content -->
  <replace css:content-children="#portal-column-content" css:theme-children=".conteudo"
      css:if-not-content=".section-home.template-view, .section-home.template-folder_listing" />
  <before css:content-children="#portal-column-one" css:theme-children=".conteudo" css:if-content="" />
  <after css:content-children="#portal-column-two" css:theme-children=".conteudo" css:if-content="" />
  
  <!-- Home -->
  <before css:content="#edit-bar" css:theme="#topo" css:if-content=".section-home" />
  <replace css:content=".destaques" css:theme-children=".destaques" css:if-content="" />
  <replace css:content=".noticias" css:theme-children=".noticias" css:if-content="" />
  
</rules>